# API для управления достижениями

## Описание

Это простой RESTful API для управления пользователями и достижениями, разработанный с использованием Python 3 и FastAPI с базой данных PostgreSQL. API предоставляет функции для работы с пользователями, добавления достижений, присвоения их пользователям, а также получения статистики, связанной с пользователями и достижениями.

## Функциональные возможности

- Управление пользователями с указанием выбранного языка (русский или английский).
- Управление достижениями с указанием названия, описания и количества очков.
- Присвоение достижений пользователям с фиксацией даты присвоения.
- Получение информации о пользователе и его достижениях на выбранном языке.
- Генерация статистики по системе:
  - Пользователь с наибольшим количеством достижений.
  - Пользователь с наибольшим количеством очков.
  - Пользователи с максимальной и минимальной разницей в очках.
  - Пользователи, которые получали достижения на протяжении 7 дней подряд.

## Технологии

- **Backend**: FastAPI
- **База данных**: PostgreSQL
- **Язык**: Python 3
- **ORM**: SQLAlchemy

## API Эндпоинты

### Main

- `GET /main/users`: Отображение пользователей.
- `GET /main/achievements`: Отображение достижений.

- `POST /main/insert_achievement`: Добавление достижения.

- `PATCH /main/insert_achievement_to_user`: Добавление достижения пользователю.

- `POST /main/achievement_for_user`: Отображение достижений по пользователю.


### Statistics

- `GET /statistics/all`: Отображение статистики.


## Схема базы данных

### Таблица пользователей (`users`)

| Поле           | Тип        | Описание                                         |
|----------------|------------|--------------------------------------------------|
| id             | Integer    | Уникальный идентификатор                         |
| name           | String(200)| Имя пользователя                                 |
| lang_is_russian| Boolean    | Язык пользователя (False - en, True - ru)        |
| is_active      | Boolean    | Активная запись (True - активен, False - неактивен) |
| created_at     | TIMESTAMP  | Дата создания                                    |
| updated_at     | TIMESTAMP  | Дата обновления                                  |

### Таблица достижений (`achievements`)

| Поле             | Тип        | Описание                                          |
|------------------|------------|---------------------------------------------------|
| id               | Integer    | Уникальный идентификатор                          |
| name             | String(200)| Название достижения                               |
| number_of_points | Integer    | Количество баллов за достижение (целое положительное число) |
| descriptions     | String(1000)| Описание достижения                               |
| is_active        | Boolean    | Активная запись (True - активен, False - неактивен) |
| created_at       | TIMESTAMP  | Дата создания                                     |
| updated_at       | TIMESTAMP  | Дата обновления                                   |

### Таблица связей пользователей и достижений (`users_achievements`)

| Поле            | Тип        | Описание                                          |
|-----------------|------------|---------------------------------------------------|
| user_id         | Integer    | Внешний ключ на таблицу `users`                   |
| achievement_id  | Integer    | Внешний ключ на таблицу `achievements`            |
| created_at      | TIMESTAMP  | Дата присвоения достижения пользователю           |
| updated_at      | TIMESTAMP  | Дата обновления записи                            |
